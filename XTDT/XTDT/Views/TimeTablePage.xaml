<Page
    x:Class="XTDT.Views.TimeTablePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Behaviors="using:Template10.Behaviors"
    xmlns:Core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:Interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:controls="using:Template10.Controls"
    xmlns:mycontrols="using:XTDT.Controls"
    xmlns:vm="using:XTDT.ViewModels"
    xmlns:models="using:XTDT.Models"
    xmlns:Schedule="using:Syncfusion.UI.Xaml.Schedule"
    xmlns:converters="using:XTDT.Converters"
    xmlns:convert="using:Template10.Converters"
    xmlns:local="using:XTDT.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    <Page.DataContext>
        <vm:TimeTablePageViewModel x:Name="ViewModel"/>
    </Page.DataContext>
    <Page.Resources>
        <DataTemplate x:Key="listTemplate" x:DataType="models:TkbItem">
            <TextBlock TextWrapping="Wrap">
                    <Run Text="["/>
                    <Run Text="{Binding Lich.Tiet}"/>
                    <Run Text="]"/>
                    <Run Text="{Binding Tkb.TenMH}"/>
                    <Run Text="("/>
                    <Run Text="{Binding Lich.Phong}"/>
                    <Run Text=")"/>
            </TextBlock>
        </DataTemplate>

        <Style x:Key="TabsStylePivotStyle" TargetType="Pivot">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Pivot">
                        <Grid x:Name="RootElement"
                            HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                            VerticalAlignment="{TemplateBinding VerticalAlignment}"
                            Background="{TemplateBinding Background}">

                            <Grid.Resources>
                                <Style x:Key="BaseContentControlStyle" TargetType="ContentControl">
                                    <Setter Property="FontFamily" Value="Segoe UI" />
                                    <Setter Property="FontWeight" Value="SemiBold" />
                                    <Setter Property="FontSize" Value="15" />
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="ContentControl">
                                                <ContentPresenter
                                                    Margin="{TemplateBinding Padding}"
                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                    Content="{TemplateBinding Content}"
                                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                                    ContentTransitions="{TemplateBinding ContentTransitions}"
                                                    OpticalMarginAlignment="TrimSideBearings" />
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>

                                <Style x:Key="TitleContentControlStyle" BasedOn="{StaticResource BaseContentControlStyle}" TargetType="ContentControl">
                                    <Setter Property="FontWeight" Value="SemiLight" />
                                    <Setter Property="FontSize" Value="24" />
                                </Style>

                                <!-- While used here to remove the spacing between header items, the PivotHeaderItem template can also be used to
                                display custom 'selected' visuals -->
                                <Style TargetType="PivotHeaderItem">
                                    <Setter Property="Padding" Value="0" />
                                </Style>
                            </Grid.Resources>

                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="Orientation">
                                    <VisualState x:Name="Portrait">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TitleContentControl" Storyboard.TargetProperty="Margin">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource PivotPortraitThemePadding}" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Landscape">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TitleContentControl" Storyboard.TargetProperty="Margin">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource PivotLandscapeThemePadding}" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="NavigationButtonsVisibility">
                                    <VisualState x:Name="NavigationButtonsHidden" />
                                    <VisualState x:Name="NavigationButtonsVisible">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="NextButton" Storyboard.TargetProperty="Opacity">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="1" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="NextButton" Storyboard.TargetProperty="IsEnabled">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="True" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PreviousButton" Storyboard.TargetProperty="Opacity">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="1" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PreviousButton" Storyboard.TargetProperty="IsEnabled">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="True" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="HeaderStates">
                                    <VisualState x:Name="HeaderDynamic" />
                                    <VisualState x:Name="HeaderStatic">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Header" Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="StaticHeader" Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <ContentControl x:Name="TitleContentControl"
                                Margin="{StaticResource PivotPortraitThemePadding}"
                                Content="{TemplateBinding Title}"
                                ContentTemplate="{TemplateBinding TitleTemplate}"
                                IsTabStop="False"
                                Style="{StaticResource TitleContentControlStyle}"
                                Visibility="Collapsed" />

                            <Grid Grid.Row="1">

                                <Grid.Resources>
                                    <ResourceDictionary>
                                        <ResourceDictionary.ThemeDictionaries>
                                            <ResourceDictionary x:Key="Default">
                                                <SolidColorBrush x:Key="SystemControlPageBackgroundChromeMediumBrush" Color="{ThemeResource SystemChromeMediumColor}" />
                                                <SolidColorBrush x:Key="SystemControlForegroundChromeMediumBrush" Color="{ThemeResource SystemChromeMediumColor}" />
                                            </ResourceDictionary>
                                            <ResourceDictionary x:Key="Light">
                                                <SolidColorBrush x:Key="SystemControlPageBackgroundChromeMediumBrush" Color="{ThemeResource SystemChromeMediumColor}" />
                                                <SolidColorBrush x:Key="SystemControlForegroundChromeMediumBrush" Color="{ThemeResource SystemChromeMediumColor}" />
                                            </ResourceDictionary>
                                            <ResourceDictionary x:Key="HighContrast">
                                                <SolidColorBrush x:Key="SystemControlPageBackgroundChromeMediumBrush" Color="{ThemeResource SystemColorWindowColor}" />
                                                <SolidColorBrush x:Key="SystemControlForegroundChromeMediumBrush" Color="{ThemeResource SystemColorButtonTextColor}" />
                                            </ResourceDictionary>
                                        </ResourceDictionary.ThemeDictionaries>

                                        <ControlTemplate x:Key="NextTemplate" TargetType="Button">
                                            <Border x:Name="Root"
                                                Background="{ThemeResource SystemControlBackgroundBaseMediumLowBrush}"
                                                BorderBrush="{ThemeResource SystemControlForegroundTransparentBrush}"
                                                BorderThickness="{ThemeResource PivotNavButtonBorderThemeThickness}">
                                                <VisualStateManager.VisualStateGroups>
                                                    <VisualStateGroup x:Name="CommonStates">
                                                        <VisualState x:Name="Normal" />
                                                        <VisualState x:Name="PointerOver">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Root" Storyboard.TargetProperty="Background">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightBaseMediumBrush}" />
                                                                </ObjectAnimationUsingKeyFrames>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Arrow" Storyboard.TargetProperty="Foreground">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltAltMediumHighBrush}" />
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>
                                                        <VisualState x:Name="Pressed">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Root" Storyboard.TargetProperty="Background">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightBaseMediumHighBrush}" />
                                                                </ObjectAnimationUsingKeyFrames>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Arrow" Storyboard.TargetProperty="Foreground">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltAltMediumHighBrush}" />
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>
                                                    </VisualStateGroup>
                                                </VisualStateManager.VisualStateGroups>
                                                <FontIcon x:Name="Arrow"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                    FontSize="12"
                                                    Foreground="{ThemeResource SystemControlForegroundAltMediumHighBrush}"
                                                    Glyph="&#xE0E3;"
                                                    MirroredWhenRightToLeft="True"
                                                    UseLayoutRounding="False" />
                                            </Border>
                                        </ControlTemplate>

                                        <ControlTemplate x:Key="PreviousTemplate" TargetType="Button">
                                            <Border x:Name="Root"
                                                Background="{ThemeResource SystemControlBackgroundBaseMediumLowBrush}"
                                                BorderBrush="{ThemeResource SystemControlForegroundTransparentBrush}"
                                                BorderThickness="{ThemeResource PivotNavButtonBorderThemeThickness}">
                                                <VisualStateManager.VisualStateGroups>
                                                    <VisualStateGroup x:Name="CommonStates">
                                                        <VisualState x:Name="Normal" />
                                                        <VisualState x:Name="PointerOver">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Root" Storyboard.TargetProperty="Background">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightBaseMediumBrush}" />
                                                                </ObjectAnimationUsingKeyFrames>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Arrow" Storyboard.TargetProperty="Foreground">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltAltMediumHighBrush}" />
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>
                                                        <VisualState x:Name="Pressed">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Root" Storyboard.TargetProperty="Background">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightBaseMediumHighBrush}" />
                                                                </ObjectAnimationUsingKeyFrames>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Arrow" Storyboard.TargetProperty="Foreground">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltAltMediumHighBrush}" />
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>
                                                    </VisualStateGroup>
                                                </VisualStateManager.VisualStateGroups>
                                                <FontIcon x:Name="Arrow"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                    FontSize="12"
                                                    Foreground="{ThemeResource SystemControlForegroundAltMediumHighBrush}"
                                                    Glyph="&#xE0E2;"
                                                    MirroredWhenRightToLeft="True"
                                                    UseLayoutRounding="False" />
                                            </Border>
                                        </ControlTemplate>
                                    </ResourceDictionary>
                                </Grid.Resources>

                                <ScrollViewer x:Name="ScrollViewer"
                                    Margin="{TemplateBinding Padding}"
                                    VerticalContentAlignment="Stretch"
                                    BringIntoViewOnFocusChange="False"
                                    HorizontalScrollBarVisibility="Hidden"
                                    HorizontalSnapPointsAlignment="Center"
                                    HorizontalSnapPointsType="MandatorySingle"
                                    Template="{StaticResource ScrollViewerScrollBarlessTemplate}"
                                    VerticalScrollBarVisibility="Disabled"
                                    VerticalScrollMode="Disabled"
                                    VerticalSnapPointsType="None"
                                    ZoomMode="Disabled">
                                    <PivotPanel x:Name="Panel" VerticalAlignment="Stretch">
                                        <Grid x:Name="PivotLayoutElement" >
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>

                                            <!-- By setting the column definitions to *,Auto,* allows the tabs to be centered by default -->
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RenderTransform>
                                                <CompositeTransform x:Name="PivotLayoutElementTranslateTransform" />
                                            </Grid.RenderTransform>

                                            <!--  This border is used as a backplate for the header area  -->
                                            <Border
                                                Grid.ColumnSpan="3"
                                                Background="{ThemeResource SystemControlPageBackgroundChromeMediumBrush}"
                                                BorderBrush="{ThemeResource SystemControlForegroundChromeMediumBrush}"
                                                BorderThickness="0,0,0,1" />

                                            <ContentPresenter x:Name="LeftHeaderPresenter"
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Stretch"
                                                Content="{TemplateBinding LeftHeader}"
                                                ContentTemplate="{TemplateBinding LeftHeaderTemplate}" />
                                            <ContentControl x:Name="HeaderClipper"
                                                Grid.Column="1"
                                                HorizontalContentAlignment="Stretch"
                                                UseSystemFocusVisuals="True">
                                                <ContentControl.Clip>
                                                    <RectangleGeometry x:Name="HeaderClipperGeometry" />
                                                </ContentControl.Clip>
                                                <Grid Background="Transparent">
                                                    <PivotHeaderPanel x:Name="StaticHeader" Visibility="Collapsed" />
                                                    <PivotHeaderPanel x:Name="Header">
                                                        <PivotHeaderPanel.RenderTransform>
                                                            <TransformGroup>
                                                                <CompositeTransform x:Name="HeaderTranslateTransform" />
                                                                <CompositeTransform x:Name="HeaderOffsetTranslateTransform" />
                                                            </TransformGroup>
                                                        </PivotHeaderPanel.RenderTransform>
                                                    </PivotHeaderPanel>
                                                </Grid>
                                            </ContentControl>
                                            <Button x:Name="PreviousButton"
                                                Grid.Column="1"
                                                Width="20"
                                                Height="36"
                                                Margin="{ThemeResource PivotNavButtonMargin}"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Top"
                                                Background="Transparent"
                                                IsEnabled="False"
                                                IsTabStop="False"
                                                Opacity="0"
                                                Template="{StaticResource PreviousTemplate}"
                                                UseSystemFocusVisuals="False" />
                                            <Button x:Name="NextButton"
                                                Grid.Column="1"
                                                Width="20"
                                                Height="36"
                                                Margin="{ThemeResource PivotNavButtonMargin}"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Background="Transparent"
                                                IsEnabled="False"
                                                IsTabStop="False"
                                                Opacity="0"
                                                Template="{StaticResource NextTemplate}"
                                                UseSystemFocusVisuals="False" />
                                            <ContentPresenter x:Name="RightHeaderPresenter"
                                                Grid.Column="2"
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Stretch"
                                                Content="{TemplateBinding RightHeader}"
                                                ContentTemplate="{TemplateBinding RightHeaderTemplate}" />
                                            <ItemsPresenter x:Name="PivotItemPresenter" Grid.Row="1" Grid.ColumnSpan="3">
                                                <ItemsPresenter.RenderTransform>
                                                    <TransformGroup>
                                                        <TranslateTransform x:Name="ItemsPresenterTranslateTransform" />
                                                        <CompositeTransform x:Name="ItemsPresenterCompositeTransform" />
                                                    </TransformGroup>
                                                </ItemsPresenter.RenderTransform>
                                            </ItemsPresenter>
                                        </Grid>
                                    </PivotPanel>

                                </ScrollViewer>
                            </Grid>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ListViewStyle" TargetType="ListView">
            <Setter Property="ItemTemplate" Value="{StaticResource listTemplate}"/>
        </Style>
        <converters:TietToBeginTime x:Key="beginConverter"/>
        <converters:TietToEndTime x:Key="endConverter"/>
        <convert:ValueWhenConverter x:Key="notEqualZero">
            <convert:ValueWhenConverter.When>
                <x:Int32>0</x:Int32>
            </convert:ValueWhenConverter.When>
            <convert:ValueWhenConverter.Value>
                <x:Boolean>False</x:Boolean>
            </convert:ValueWhenConverter.Value>
            <convert:ValueWhenConverter.Otherwise>
                <x:Boolean>True</x:Boolean>
            </convert:ValueWhenConverter.Otherwise>
        </convert:ValueWhenConverter>
    </Page.Resources>
    <RelativePanel Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="AdaptiveVisualStateGroup">
                <VisualState x:Name="VisualStateNarrow">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="{StaticResource NarrowMinWidth}" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <!--  TODO: change properties for narrow view  -->
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="VisualStateNormal">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="{StaticResource NormalMinWidth}" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <!--  TODO: change properties for normal view  -->
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="VisualStateWide">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="{StaticResource WideMinWidth}" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <!--  TODO: change properties for wide view  -->
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        <!--  header  -->
        <controls:PageHeader x:Name="pageHeader" Frame="{x:Bind Frame}"
                             RelativePanel.AlignLeftWithPanel="True"
                             RelativePanel.AlignRightWithPanel="True"
                             RelativePanel.AlignTopWithPanel="True" Text="TimeTablePage" />
        <Pivot 
            x:Name="pivot"
            RelativePanel.AlignBottomWithPanel="True"
            RelativePanel.AlignLeftWithPanel="True"
            RelativePanel.AlignRightWithPanel="True"
            RelativePanel.Below="pageHeader"
            Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}"
            Style="{StaticResource TabsStylePivotStyle}">
            <PivotItem>
                <PivotItem.Header>
                    <mycontrols:TabHeader Label="Agenda" Data="M9.9999831,23.999999L18.999983,23.999999C19.552983,23.999999 19.999983,24.448001 19.999983,24.999999 19.999983,25.551999 19.552983,25.999999 18.999983,25.999999L9.9999831,25.999999C9.4469826,25.999999 8.9999831,25.551999 8.9999831,24.999999 8.9999831,24.448001 9.4469826,23.999999 9.9999831,23.999999z M4.9999826,23.999999L5.9999826,23.999999C6.5529826,23.999999 6.9999826,24.448001 6.9999826,24.999999 6.9999826,25.551999 6.5529826,25.999999 5.9999826,25.999999L4.9999826,25.999999C4.4469826,25.999999 3.9999826,25.551999 3.9999828,24.999999 3.9999826,24.448001 4.4469826,23.999999 4.9999826,23.999999z M9.9999831,18L18.999983,18C19.552983,18 19.999983,18.448 19.999983,19 19.999983,19.551999 19.552983,19.999999 18.999983,19.999999L9.9999831,19.999999C9.4469826,19.999999 8.9999831,19.551999 8.9999831,19 8.9999831,18.448 9.4469826,18 9.9999831,18z M4.9999826,18L5.9999826,18C6.5529826,18 6.9999826,18.448 6.9999826,19 6.9999826,19.551999 6.5529826,19.999999 5.9999826,19.999999L4.9999826,19.999999C4.4469826,19.999999 3.9999826,19.551999 3.9999828,19 3.9999826,18.448 4.4469826,18 4.9999826,18z M9.9999831,12L18.999983,12C19.552983,12 19.999983,12.448 19.999983,13 19.999983,13.552 19.552983,14 18.999983,14L9.9999831,14C9.4469826,14 8.9999831,13.552 8.9999831,13 8.9999831,12.448 9.4469826,12 9.9999831,12z M4.9999826,12L5.9999826,12C6.5529826,12 6.9999826,12.448 6.9999826,13 6.9999826,13.552 6.5529826,14 5.9999826,14L4.9999826,14C4.4469826,14 3.9999826,13.552 3.9999828,13 3.9999826,12.448 4.4469826,12 4.9999826,12z M2.0000002,5.000026L2.0000002,30.000026 22,30.000026 22,5.000026 18.999983,5.000026 18.999983,6.8999999C18.999983,7.506,18.506983,8,17.899983,8L6.0999825,8C5.4929826,8,4.9999826,7.506,4.9999826,6.8999999L4.9999826,5.000026z M10.004982,2.0000001L9.9999831,2.9060001C9.9999831,3.507,9.506983,3.9999999,8.8999827,3.9999999L6.9999826,3.9999999 6.9999826,6 16.999983,6 16.999983,3.9999999 15.100983,3.9999999C14.493983,3.9999999,13.999983,3.506,13.999983,2.9L14.004982,2.0000001z M9.1089823,0L14.908983,0C15.515983,0,16.009983,0.49399996,16.009983,1.0999998L16.004982,2.0000001 17.899983,2.0000001C18.469046,2,18.937912,2.4341797,18.994297,2.9877806L18.994919,3.0000258 22,3.0000258C23.102967,3.0000257,24,3.8969984,24,5.000026L24,30.000026C24,31.102992,23.102967,32.000026,22,32.000026L2.0000002,32.000026C0.89697289,32.000026,2.365407E-07,31.102992,0,30.000026L0,5.000026C2.365407E-07,3.8969984,0.89697289,3.0000257,2.0000002,3.0000258L5.0050471,3.0000258 5.0056674,2.9877806C5.062053,2.4341797,5.5309203,2,6.0999825,2.0000001L8.0049822,2.0000001 8.0099823,1.0939997C8.0099823,0.49300003,8.5029824,0,9.1089823,0z"/>
                </PivotItem.Header>
                <Grid Margin="0,8,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Right"
                                Grid.Row="0">
                        <Button Margin="4" HorizontalAlignment="Right">
                            <Interactivity:Interaction.Behaviors>
                                <Core:EventTriggerBehavior EventName="Tapped">
                                    <Core:InvokeCommandAction 
                                        Command="{Binding ChangeDateCommand}">
                                        <Core:InvokeCommandAction.CommandParameter>
                                            <x:Int32>0</x:Int32>
                                        </Core:InvokeCommandAction.CommandParameter>
                                    </Core:InvokeCommandAction>
                                </Core:EventTriggerBehavior>
                            </Interactivity:Interaction.Behaviors>

                            <Button.Content>
                                <SymbolIcon Symbol="GoToToday"/>
                            </Button.Content>
                        </Button>
                        <Grid Width="1" 
                              Background="{ThemeResource SystemControlBackgroundBaseHighBrush}"
                              Margin="4"/>
                        <Button Margin="4">
                            <Interactivity:Interaction.Behaviors>
                                <Core:EventTriggerBehavior EventName="Tapped">
                                    <Core:InvokeCommandAction 
                                        Command="{Binding ChangeDateCommand}">
                                        <Core:InvokeCommandAction.CommandParameter>
                                            <x:Int32>-1</x:Int32>
                                        </Core:InvokeCommandAction.CommandParameter>
                                    </Core:InvokeCommandAction>
                                </Core:EventTriggerBehavior>
                            </Interactivity:Interaction.Behaviors>
                            <Button.Content>
                                <SymbolIcon Symbol="Back"/>
                            </Button.Content>
                        </Button>
                        <DatePicker  MinWidth="172"
                            Name="datePicker"
                        Margin="4" HorizontalAlignment="Center"
                        Date="{Binding SelectedDate,Mode=TwoWay}"
                            DayFormat="{}{day.integer} {dayofweek.abbreviated}"/>
                        <Button Margin="4">
                            <Interactivity:Interaction.Behaviors>
                                <Core:EventTriggerBehavior EventName="Tapped">
                                    <Core:InvokeCommandAction 
                                        Command="{Binding ChangeDateCommand}">
                                        <Core:InvokeCommandAction.CommandParameter>
                                            <x:Int32>1</x:Int32>
                                        </Core:InvokeCommandAction.CommandParameter>
                                    </Core:InvokeCommandAction>
                                </Core:EventTriggerBehavior>
                            </Interactivity:Interaction.Behaviors>
                            <Button.Content>
                                <SymbolIcon Symbol="Forward"/>
                            </Button.Content>
                        </Button>
                    </StackPanel>
                    <Grid Name="agendaBackground" Grid.Row="1">
                        <Grid Name="backgroundGrid" Width="128" Height="128" Visibility="Collapsed" />
                        <Path Data="M7.223949,9.4380012L14.896656,20.452017 14.954648,20.443169 15.038101,20.438957 22.702677,9.4380012 12.611923,9.4380012 16.402582,15.283004C16.703574,15.746004 16.571578,16.366004 16.107589,16.666004 15.939593,16.775004 15.751598,16.827004 15.564603,16.827004 15.237611,16.827004 14.91662,16.666004 14.724624,16.371004L10.228492,9.4380012z M24.523184,4.6517372C23.118502,4.6253121 21.802285,5.5018895 21.338339,6.8920636 21.261776,7.1213114 21.111136,7.3046221 20.921677,7.4235734L20.896046,7.4380009 24.617651,7.4380009C24.989653,7.4380013 25.33062,7.645002 25.503623,7.9750041 25.675616,8.3049979 25.650622,8.704 25.437644,9.0099999L23.948031,11.148324 24.074732,11.166531C25.594685,11.346287 27.085927,10.446904 27.586434,8.9480437 27.861437,8.1240517 27.798436,7.2410603 27.408431,6.4630675 27.015425,5.6790752 26.337414,5.0950809 25.500403,4.8190835 25.176211,4.7120221 24.847342,4.657835 24.523184,4.6517372z M0.99997449,0L5.947848,0C6.2868396,0,6.6018314,0.17200041,6.7868271,0.45600033L11.314863,7.4380009 19.883857,7.4380009 19.805872,7.3876087C19.460253,7.138948 19.299934,6.6848156 19.441311,6.2590696 20.186385,4.0206535 22.305926,2.6113863 24.560345,2.6518488 25.080595,2.6611862 25.608029,2.7477283 26.127411,2.9191017 27.473431,3.3640976 28.562449,4.3040884 29.195458,5.5670761 29.826466,6.8230643 29.928469,8.2490506 29.482462,9.5820374 28.74745,11.789017 26.675419,13.189003 24.457386,13.189003 23.906378,13.189003 23.34837,13.103004 22.797362,12.921006L22.730996,12.895365 16.05701,22.475801 16.05701,30.438003 21.057009,30.438003C21.610011,30.438003 22.057009,30.886003 22.057009,31.438003 22.057009,31.990003 21.610011,32.438003 21.057009,32.438003L15.05701,32.438003 10.05701,32.438003C9.5040102,32.438003 9.0570102,31.990003 9.0570102,31.438003 9.0570102,30.886003 9.5040102,30.438003 10.05701,30.438003L14.05701,30.438003 14.05701,22.744804 4.4890117,9.0099999C4.2760032,8.704 4.2500026,8.3049979 4.4219967,7.9750041 4.5949977,7.645002 4.9370021,7.4380013 5.3090048,7.4380009L8.9314685,7.4380009 5.4048622,2.0000005 0.99997449,2.0000005C0.44698858,2.0000005 0,1.5530005 0,1.0000005 0,0.44800043 0.44698858,0 0.99997449,0z" Stretch="Uniform" Fill="#FFFFFFFF" Width="68" Height="68" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                            <Path.RenderTransform>
                                <TransformGroup>
                                    <TransformGroup.Children>
                                        <RotateTransform Angle="0" />
                                        <ScaleTransform ScaleX="1" ScaleY="1" />
                                    </TransformGroup.Children>
                                </TransformGroup>
                            </Path.RenderTransform>
                        </Path>
                    </Grid>
                    <ListView Grid.Row="1" ItemsSource="{Binding Agenda}" SelectionChanged="ListViewSelectionChanged">
                        <Interactivity:Interaction.Behaviors>
                            <Core:DataTriggerBehavior Binding="{Binding Agenda.Count}" 
                                                      Value="0" 
                                                      ComparisonCondition="Equal">
                                <Core:ChangePropertyAction 
                                    TargetObject="{Binding ElementName=agendaBackground}"
                                    PropertyName="Opacity">
                                    <Core:ChangePropertyAction.Value>
                                        <x:Double>0.5</x:Double>
                                    </Core:ChangePropertyAction.Value>
                                </Core:ChangePropertyAction>
                            </Core:DataTriggerBehavior>
                            <Core:DataTriggerBehavior Binding="{Binding Agenda.Count}" 
                                                      Value="0" 
                                                      ComparisonCondition="NotEqual">
                                <Core:ChangePropertyAction 
                                    TargetObject="{Binding ElementName=agendaBackground}"
                                    PropertyName="Opacity">
                                    <Core:ChangePropertyAction.Value>
                                        <x:Double>0</x:Double>
                                    </Core:ChangePropertyAction.Value>
                                </Core:ChangePropertyAction>
                            </Core:DataTriggerBehavior>
                        </Interactivity:Interaction.Behaviors>
                        <ListView.Transitions>
                            <TransitionCollection>
                                <EntranceThemeTransition/>
                            </TransitionCollection>
                        </ListView.Transitions>
                        <ListView.Resources>
                            <SolidColorBrush x:Key="itemBrush" Color="{ThemeResource SystemListMediumColor}"/>
                        </ListView.Resources>
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                            </Style>
                        </ListView.ItemContainerStyle>
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <Grid Margin="0,8,0,8" Padding="4,4,4,4" >
                                    <Grid.Transitions>
                                        <TransitionCollection>
                                            <EntranceThemeTransition/>
                                        </TransitionCollection>
                                    </Grid.Transitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition Height="5"/>
                                        <RowDefinition/>
                                        <RowDefinition Height="8"/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>

                                    <Grid Background="{ThemeResource SystemControlBackgroundBaseHighBrush}" 
                                          Width="1" VerticalAlignment="Stretch"
                                          Grid.Row="2" Grid.RowSpan="3"
                                          Margin="0,4,0,4"/>

                                    <!--<Border CornerRadius="90" Width="32" Height="32"
                                                Background="{ThemeResource SystemControlBackgroundChromeMediumBrush}"
                                            Grid.Row="3" Grid.RowSpan="2" VerticalAlignment="Center">
                                        <TextBlock Text="1:00" HorizontalAlignment="Center" VerticalAlignment="Center"
                                                   FontSize="8"/>
                                    </Border>-->

                                    <Border Grid.Row="2" CornerRadius="90" Background="{ThemeResource SystemControlBackgroundChromeMediumBrush}"
                                            Width="48" Height="48"
                                            VerticalAlignment="Top">
                                        <TextBlock Text="{Binding Lich.Tiet,Converter={StaticResource beginConverter}}" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="12"/>
                                    </Border>
                                    <Border Grid.Row="4" CornerRadius="90" Background="{ThemeResource SystemControlBackgroundChromeMediumBrush}"
                                            Width="36" Height="36"
                                            VerticalAlignment="Bottom">
                                        <TextBlock Text="{Binding Lich.Tiet,Converter={StaticResource endConverter}}" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="10"/>
                                    </Border>
                                    <TextBlock Grid.ColumnSpan="2" FontSize="20" TextWrapping="WrapWholeWords">
                                        <Run Text="{Binding Tkb.TenMH}"/>
                                        <Run Text="("/>
                                        <Run Text="{Binding Lich.Phong}"/>
                                        <Run Text=")"/>
                                    </TextBlock>
                                    <Grid Grid.Row="1" Grid.ColumnSpan="2" Height="1" VerticalAlignment="Center" Background="{ThemeResource SystemControlBackgroundChromeMediumBrush}"/>
                                    <StackPanel Grid.Row="2" Grid.RowSpan="3" Grid.Column="1"
                                                Padding="4,4,4,4">
                                        <TextBlock TextWrapping="WrapWholeWords">
                                            <Run Text="Mã Môn Học: "/>
                                            <Run Text="{Binding Tkb.MaMH}"/>
                                        </TextBlock>
                                        <TextBlock TextWrapping="WrapWholeWords">
                                            <Run Text="Nhóm: "/>
                                            <Run Text="{Binding Tkb.Nhom}"/>
                                        </TextBlock>
                                        <TextBlock TextWrapping="WrapWholeWords">
                                            <Run Text="Tổ: "/>
                                            <Run Text="{Binding Tkb.To}"/>
                                        </TextBlock>
                                        <TextBlock>
                                            <Run Text="Tiết: "/>
                                            <Run Text="{Binding Lich.Tiet}"/>
                                        </TextBlock>
                                        <TextBlock TextWrapping="WrapWholeWords">
                                            <Run Text="Thứ: "/>
                                            <Run Text="{Binding Lich.Thu}"/>
                                        </TextBlock>
                                        <TextBlock TextWrapping="WrapWholeWords">
                                            <Run Text="Tuần: "/>
                                            <Run Text="{Binding Lich.Tuan}"/>
                                        </TextBlock>
                                    </StackPanel>
                                </Grid>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </Grid>
            </PivotItem>

            <PivotItem>
                <PivotItem.Header>
                    <mycontrols:TabHeader Label="Calendar"
                                              Data="M25.353003,21.018997L22.951994,24.640997 25.353003,24.640997z M16.760988,17.918013C17.791988,17.918013 18.600988,18.201014 19.189987,18.764013 19.778986,19.328012 20.073986,20.029013 20.073986,20.868013 20.073986,21.345015 19.989986,21.800014 19.820986,22.231014 19.651987,22.662014 19.384987,23.114014 19.018988,23.586014 18.776987,23.900015 18.339987,24.350014 17.707989,24.938015 17.076988,25.526014 16.676989,25.917015 16.50799,26.109015 16.338989,26.302015 16.20299,26.490015 16.098989,26.673014L20.073986,26.673014 20.073986,28.560015 13.055992,28.560015C13.131991,27.847015 13.359992,27.171015 13.739991,26.532015 14.119991,25.894014 14.86999,25.046015 15.99099,23.991014 16.89399,23.138014 17.446989,22.559013 17.651989,22.256014 17.926989,21.837013 18.064987,21.423014 18.064987,21.013014 18.064987,20.559013 17.944988,20.212013 17.704988,19.968014 17.464989,19.725014 17.133989,19.603014 16.710989,19.603014 16.29299,19.603014 15.95999,19.731014 15.71399,19.986013 15.46699,20.242014 15.32399,20.666014 15.28599,21.258015L13.290992,21.056013C13.409991,19.938013 13.782991,19.136013 14.40999,18.648014 15.03699,18.162014 15.81999,17.918013 16.760988,17.918013z M25.610004,17.916996L27.29101,17.916996 27.29101,24.640997 28.588015,24.640997 28.588015,26.425997 27.29101,26.425997 27.29101,28.558998 25.353003,28.558998 25.353003,26.425997 21.078987,26.425997 21.078987,24.647997z M4.0529909,15.058002L8.034996,15.058002 8.034996,17.191006 4.0529909,17.191006z M14.93401,4.0770197L17.067015,4.0770197 17.067015,8.0929985 14.93401,8.0929985z M15.999992,0C24.823025,7.6103788E-08,32,7.232996,32,16.12401L29.867002,16.12401C29.867002,8.409997 23.646999,2.1330244 15.999992,2.1330242 8.3539925,2.1330244 2.1339884,8.409997 2.1339884,16.12401 2.1339884,21.449995 5.0659966,26.243998 9.7860003,28.634987L8.821003,30.538C3.3799913,27.780983 0,22.258007 0,16.12401 0,7.232996 7.1779971,7.6103788E-08 15.999992,0z"/>
                </PivotItem.Header>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Schedule:SfSchedule x:Name="schedule" Appointments="{Binding Schedule}"
                                       Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" 
                                       ScheduleType="Week"/>
                    <CommandBar Grid.Row="1">
                        <AppBarButton Label="Day" Icon="CalendarDay">
                            <Interactivity:Interaction.Behaviors>
                                <Core:EventTriggerBehavior EventName="Tapped">
                                    <Core:ChangePropertyAction TargetObject="{Binding ElementName=schedule}"
                                                               PropertyName="ScheduleType" Value="TimeLine"/>
                                </Core:EventTriggerBehavior>
                            </Interactivity:Interaction.Behaviors>
                        </AppBarButton>
                        <AppBarButton Label="Week" Icon="CalendarWeek">
                            <Interactivity:Interaction.Behaviors>
                                <Core:EventTriggerBehavior EventName="Tapped">
                                    <Core:ChangePropertyAction TargetObject="{Binding ElementName=schedule}"
                                                               PropertyName="ScheduleType" Value="Week"/>
                                </Core:EventTriggerBehavior>
                            </Interactivity:Interaction.Behaviors>
                        </AppBarButton>
                        <AppBarButton Label="Month" Icon="Calendar">
                            <Interactivity:Interaction.Behaviors>
                                <Core:EventTriggerBehavior EventName="Tapped">
                                    <Core:ChangePropertyAction TargetObject="{Binding ElementName=schedule}"
                                                               PropertyName="ScheduleType" Value="Month"/>
                                </Core:EventTriggerBehavior>
                            </Interactivity:Interaction.Behaviors>
                        </AppBarButton>

                    </CommandBar>

                </Grid>

            </PivotItem>

            <PivotItem>
                <PivotItem.Header>
                    <mycontrols:TabHeader Label="Overall"
                                              Data="M4.0000144,28.001998L32.000014,28.001998 32.000014,30.001998 4.0000144,30.001998z M1.6689301E-05,21.999999L28.000016,21.999999 28.000016,23.999999 1.6689301E-05,23.999999z M4.0000168,14.999999L32.000016,14.999999 32.000016,16.999999 4.0000168,16.999999z M5.5000166,8.9999981L28.000016,8.9999981 28.000016,10.999998 5.5000166,10.999998z M14.000017,2.9999981L32.000016,2.9999981 32.000016,4.9999981 14.000017,4.9999981z M5.4999999,0C8.5320001,0,11,2.467001,11,5.5L9,5.5C9,3.5699997 7.4299998,2 5.4999999,2 3.5699998,2 1.9999998,3.5699997 1.9999995,5.5 1.9999998,7.4300003 3.5699998,9 5.4999999,9L5.4999999,11C2.4679998,11 0,8.5330009 0,5.5 0,2.467001 2.4679998,0 5.4999999,0z"/>
                </PivotItem.Header>
                <Grid Margin="8,32,8,8"                       
                      RelativePanel.AlignBottomWithPanel="True"
                      RelativePanel.AlignLeftWithPanel="True"
                      RelativePanel.AlignRightWithPanel="True">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <ComboBox HorizontalAlignment="Stretch" Name="cbb"
                        ItemsSource="{Binding HocKyList,UpdateSourceTrigger=PropertyChanged}"
                              SelectedItem="{Binding SelectedTTHK,Mode=TwoWay}">
                        <Interactivity:Interaction.Behaviors>
                            <Core:EventTriggerBehavior EventName="SelectionChanged">
                                <Core:InvokeCommandAction Command="{Binding SelectHocKyCommand}" CommandParameter="{Binding SelectedItem, ElementName=cbb}"/>
                            </Core:EventTriggerBehavior>
                        </Interactivity:Interaction.Behaviors>
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding TenHocKy}"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                    <Grid Grid.Row="1" Margin="0,12,0,0" BorderBrush="{ThemeResource SystemControlBackgroundBaseMediumBrush}" BorderThickness="1">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition Height="1"/>
                            <RowDefinition/>
                            <RowDefinition Height="1"/>
                            <RowDefinition />
                            <RowDefinition Height="1"/>
                            <RowDefinition/>

                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="1"/>
                            <ColumnDefinition/>

                        </Grid.ColumnDefinitions>
                        <!--seperator-->
                        <Grid Grid.Row="0" Grid.Column="1" Grid.RowSpan="8" Background="{ThemeResource SystemControlBackgroundBaseMediumBrush}"/>

                        <Grid Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3" Background="{ThemeResource SystemControlBackgroundBaseMediumBrush}"/>
                        <Grid Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" Background="{ThemeResource SystemControlBackgroundBaseMediumBrush}"/>
                        <Grid Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="3" Background="{ThemeResource SystemControlBackgroundBaseMediumBrush}"/>

                        <ListView Header="SUN" Grid.Row="0" Grid.Column="0" Style="{StaticResource ListViewStyle}"
                                  ItemsSource="{Binding OverallSunday}" 
                                  SelectionChanged="ListViewSelectionChanged"/>
                        <ListView Header="MON" Grid.Row="0" Grid.Column="2" Style="{StaticResource ListViewStyle}"
                                  ItemsSource="{Binding OverallMonday}"
                                  SelectionChanged="ListViewSelectionChanged"/>
                        <ListView Header="TUE" Grid.Row="2" Grid.Column="0" Style="{StaticResource ListViewStyle}"
                                  ItemsSource="{Binding OverallTuesday}"
                                  SelectionChanged="ListViewSelectionChanged"/>
                        <ListView Header="WED" Grid.Row="2" Grid.Column="2" Style="{StaticResource ListViewStyle}"
                                  ItemsSource="{Binding OverallWednesday}"
                                  SelectionChanged="ListViewSelectionChanged"/>
                        <ListView Header="THU" Grid.Row="4" Grid.Column="0" Style="{StaticResource ListViewStyle}"
                                  ItemsSource="{Binding OverallThursday}"
                                  SelectionChanged="ListViewSelectionChanged"/>
                        <ListView Header="FRI" Grid.Row="4" Grid.Column="2" Style="{StaticResource ListViewStyle}"
                                  ItemsSource="{Binding OverallFriday}"
                                  SelectionChanged="ListViewSelectionChanged"/>
                        <ListView Header="SAT" Grid.Row="6" Grid.Column="0" Style="{StaticResource ListViewStyle}"
                                  ItemsSource="{Binding OverallSaturday}"
                                  SelectionChanged="ListViewSelectionChanged"/>
                    </Grid>
                </Grid>
            </PivotItem>
        </Pivot>
        <ProgressRing 
            RelativePanel.AlignBottomWithPanel="True"
            RelativePanel.AlignLeftWithPanel="True"
            RelativePanel.AlignRightWithPanel="True"
            RelativePanel.Below="pageHeader"
            Height="48"
            Width="48"
            IsActive="{Binding Quest,Converter={StaticResource notEqualZero}}"/>
    </RelativePanel>
</Page>
